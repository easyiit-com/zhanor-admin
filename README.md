

 
zhanor(æ ˆé±¼)æ˜¯åŸºäºflask 2.0æ¡†æ¶å¼€å‘çš„ä¸€ä¸ªé€šç”¨åå°ç®¡ç†ç³»ç»Ÿï¼Œæ•°æ®åº“åŠåå°çš„åŠŸèƒ½å‚è€ƒäº†å›½å†…çš„fastadminã€‚å¼€å‘æ­¤ç³»ç»Ÿä¸»è¦æ˜¯å› ä¸ºæ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¥½ç”¨çš„ã€pythonç‰ˆçš„UIå¥½çœ‹ä¸€ç‚¹çš„é€šç”¨åå°ç³»ç»Ÿï¼Œè¿‘æœŸäººå·¥æ™ºèƒ½çš„é¡¹ç›®è¾ƒå¤šï¼Œå¤§å¤šéƒ½æ˜¯pythonï¼Œæ€¥åˆ‡çš„éœ€è¦ä¸€ä¸ªpythonç‰ˆçš„åå°åšæ”¯æŒã€‚

æ ˆé±¼çš„æ¥å†ï¼Œä½œè€…æ˜¯ä¸€åªåšå…¨æ ˆå¼€å‘çš„é±¼ã€‚å¼€å‘åº”è¯¥æ˜¯çƒ­çˆ±çš„äººåšè‡ªç”±çš„äº‹ã€‚

-------------------------------------------

æˆªå›¾ï¼š

| ![Example Image](screen_shot/admin.png) | ![Example Image](screen_shot/dashboard.png) |
|------------------------------------------|---------------------------------------------|
| ![Example Image](screen_shot/general_category_add.png) | ![Example Image](screen_shot/general_category.png) |
| ![Example Image](screen_shot/general_config.png) | ![Example Image](screen_shot/generator.png) |
| ![Example Image](screen_shot/profile.png) |                                             |


é€‰æ‹©flaskçš„åŸå› ï¼šflaskç”¨çš„äººå¤š

å¤§éƒ¨åˆ†ä»£ç å€ŸåŠ©äº†chatGPTå¼€å‘

æ¡†æ¶ï¼šflask

æ¨¡ç‰ˆï¼šjinja2

å‰ç«¯ï¼šåŸºäºbootscrapçš„tablerUIåº“+jQuery

æ—¶é—´é€‰æ‹©å™¨ï¼šflatpickr 4.6.13

toastï¼štoastr.js 2.1.4

å›¾æ ‡åº“ï¼štabler-icons

ç²˜è´´æ¿ï¼šclipboard.js 2.0.11

jqueryï¼šjquery 3.7.1

è¡¨å•éªŒè¯ï¼šjquery-validate 1.19.5 


å…¶ä»–æ›´æ–°ä¸­...
-------------------------------------------
å¼€å‘è¿›åº¦ï¼š

1ã€åå°åŠŸèƒ½åŸºæœ¬å®Œæˆï¼Œå‰ç«¯ä¼šå‘˜ä¸­å¿ƒæ›´æ–°ä¸­...

2ã€å‰ç«¯ä¼šå‘˜ä¸­å¿ƒå¼€å‘ä¸­...

-------------------------------------------
ç›®å‰å¼€å‘äº†3ä¸ªæ’ä»¶:

1.demoæ’ä»¶ï¼Œæ¼”ç¤ºç³»ç»Ÿçš„è¡¨å•æäº¤ç­‰åŠŸèƒ½ã€‚

2.<a href='https://github.com/easyiit-com/generator-plugin-for-zhanor-admin' target="_blank">ä»£ç ç”Ÿæˆå™¨</a>ï¼Œå¯ä»¥æ ¹æ®è®¾è®¡å¥½çš„æ•°æ®è¡¨è‡ªåŠ¨ç”Ÿæˆmodelï¼Œæ¨¡ç‰ˆï¼Œviewsï¼Œè¿˜æœ‰å¯¹åº”çš„jsæ–‡ä»¶ï¼Œæ•°æ®è¡¨çš„CRUDåŠŸèƒ½å°±æœ‰äº†ã€‚   

3.ä¼šå‘˜ä½™é¢å……å€¼æ’ä»¶ï¼Œé›†æˆäº†å›½å†…å¸¸ç”¨çš„å¾®ä¿¡å’Œæ”¯ä»˜å®æ”¯ä»˜æ¥å£ã€‚ä¸‹ä¸€ä¸ªæ’ä»¶æ˜¯vipè´­ä¹°æ’ä»¶ï¼Œå¼€å‘ä¸­...

ä»¥ä¸Š3ä¸ªæ’ä»¶åŸºæœ¬å°±å¯ä»¥æ»¡è¶³æ­å»ºä¸€ä¸ªçµæ´»åº¦å¾ˆé«˜çš„åå°ç³»ç»Ÿäº†ï¼Œflaskä¼˜è´¨çš„æ’ä»¶åŠŸèƒ½ï¼Œéå¸¸é€‚åˆå¤§å‹é¡¹ç›®ã€‚

å¼€å‘ä¸­çš„æ’ä»¶ï¼šæå…‰è®¤è¯ï¼Œå¾®ä¿¡æ”¯ä»˜å®ç¬¬ä¸‰æ–¹ç™»å½•

------------------------------------------

Getting Startedï¼ˆå®‰è£…å¦‚ä¸‹æ­¥éª¤ï¼‰
------------------------------------------

å¦‚æœæ‚¨è¿˜æœªåˆ‡æ¢åˆ°æ–°åˆ›å»ºçš„é¡¹ç›®ç›®å½•ï¼Œè¯·è¿›å…¥è¯¥ç›®å½•ã€‚å½“å‰å·¥ä½œç›®å½•åº”å½“ä¸æœ¬ README.txt æ–‡ä»¶å’Œ setup.py æ–‡ä»¶æ‰€åœ¨ç›®å½•ç›¸åŒã€‚

## ğŸ“–å®‰è£…æ­¥éª¤(Ubuntuç³»ç»Ÿ)ï¼š

### 1.å®‰è£…

å®‰è£… SQLite3 åŠå…¶å¼€å‘åŒ…ï¼š

```
sudo apt-get install libsqlite3-dev

```

å…‹éš†ï¼š

```
git clone https://github.com/easyiit-com/zhanor-admin.git
```

è¿›å…¥ç›®å½•

```
cd zhanor-admin
```

### 2.å¦‚æœå°šæœªåˆ›å»ºï¼Œè¯·åˆ›å»ºä¸€ä¸ª Python è™šæ‹Ÿç¯å¢ƒï¼Œåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š

```
python3 -m venv .venv

. .venv/bin/activate

```


### 3.æ›´æ–° pip å’Œ setuptools å·¥å…·ï¼š


```
pip install --upgrade pip setuptools
```

### 4.ä½¿ç”¨åŒ…å«æµ‹è¯•ä¾èµ–é¡¹çš„æ–¹å¼ï¼Œä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…é¡¹ç›®ã€‚

å®‰è£…ä¾èµ–ï¼š

```
pip install -r requirements.txt
```


    å¦‚å‡ºç°é”™è¯¯ï¼š

    Can not find valid pkg-config name. Specify MYSQLCLIENT_CFLAGS and MYSQLCLIENT_LDFLAGS env vars manually [end of output]

    å¯¹äºUbuntu/Debianç³»Linuxï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…MySQLå¼€å‘åº“ï¼š
    
    ```
    sudo apt-get update
    ```

    ```
    sudo apt-get install libmysqlclient-dev

    ```

    å¯¹äºCentOSéœ€æ‰§è¡Œï¼š

    ```
    sudo dnf install mysql-devel

    ```


### 5.ä½¿ç”¨ Alembic åˆå§‹åŒ–å¹¶å‡çº§æ•°æ®åº“ï¼Œç”Ÿæˆé¦–ä¸ªä¿®è®¢ç‰ˆæœ¬ã€‚

æ‰§è¡Œè¿™ä¸€æ­¥ä¹‹å‰ï¼Œéœ€é…ç½®å¥½ æ ¹ç›®å½•ä¸‹çš„ alembic.ini æ–‡ä»¶çš„63è¡Œå’Œæ ¹ç›®å½•ä¸‹é¢ config.py æ–‡ä»¶ä¸­çš„20è¡Œçš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š

sqlalchemy.url = mysql://root:12345678@localhost:3306/zhanor_1.0.4?charset=utf8mb4


### 6.æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼š

```
alembic current
alembic revision --autogenerate -m "addon"
alembic upgrade head
``` 

## æ³¨æ„!!æ³¨æ„!!æ³¨æ„!!

å¦‚æœæ’ä»¶ä¸­åŒ…å«modelsæ–‡ä»¶å¤¹ï¼Œä¹Ÿä¼šæœç´¢æ¨¡å‹æ–‡ä»¶è‡ªåŠ¨å¼•å…¥

### 7.ä½¿ç”¨è„šæœ¬å°†é»˜è®¤æ•°æ®åŠ è½½åˆ°æ•°æ®åº“ä¸­ã€‚


åŠ è½½é»˜è®¤æ•°æ®è‡³æ•°æ®åº“ï¼š

```
python initialize_db.py
```

ä¹Ÿå¯ä»¥ä½¿ç”¨æ ¹ç›®å½•ä¸‹çš„.sqlæ–‡ä»¶ç›´æ¥å¯¼å…¥é»˜è®¤æ•°æ®


### 8.è¿è¡Œé¡¹ç›®çš„æµ‹è¯•ã€‚

æ‰§è¡Œæµ‹è¯•ï¼š

```
 
```

### 9.è¿è¡Œé¡¹ç›®ã€‚
å¯åŠ¨é¡¹ç›®æœåŠ¡ï¼š

```
flask --app main run --debug 

```
æˆ–
```
python main.py

```

gunicornå¯åŠ¨å‘½ä»¤ï¼š

```



```

æœªå®‰è£…gunicornï¼Œåˆ™éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```
 .venv/bin/pip install gunicorn
```

å¯åŠ¨åé»˜è®¤è®¿é—®åœ°å€ï¼šhttp://127.0.0.1:5001

åå°åœ°å€ï¼šhttp://127.0.0.1:5001/admin
é»˜è®¤ç”¨æˆ·åï¼šadmin@admin.com
é»˜è®¤å¯†ç ï¼š88888888
 
### 10.è¿›å…¥ç”Ÿäº§ç¯å¢ƒ

NginxæœåŠ¡å™¨åå‘ä»£ç é…ç½®å®ä¾‹ï¼š
```
server
{
    listen 80;
    server_name admin.zhanor.com;
    index index.html index.htm default.htm default.html;
    root /www/python_venv/zhanor/__init__.py;

    #SSL-START SSLç›¸å…³é…ç½®
    #error_page 404/404.html;
    
    #SSL-END

    #ERROR-PAGE-START  é”™è¯¯é¡µç›¸å…³é…ç½®
    #error_page 404 /404.html;
    #error_page 502 /502.html;
    #ERROR-PAGE-END


    #REWRITE-START ä¼ªé™æ€ç›¸å…³é…ç½®
    include /www/server/panel/vhost/rewrite/other___init___py.conf;
    #REWRITE-END

    #ç¦æ­¢è®¿é—®çš„æ–‡ä»¶æˆ–ç›®å½•
    location ~ ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md|package.json|package-lock.json|\.env) {
        return 404;
    }

    #ä¸€é”®ç”³è¯·SSLè¯ä¹¦éªŒè¯ç›®å½•ç›¸å…³è®¾ç½®
    location /.well-known/ {
        root /www/wwwroot/java_node_ssl;
    }

    #ç¦æ­¢åœ¨è¯ä¹¦éªŒè¯ç›®å½•æ”¾å…¥æ•æ„Ÿæ–‡ä»¶
    if ( $uri ~ "^/\.well-known/.*\.(php|jsp|py|js|css|lua|ts|go|zip|tar\.gz|rar|7z|sql|bak)$" ) {
        return 403;
    }


    # HTTPåå‘ä»£ç†ç›¸å…³é…ç½®å¼€å§‹ >>>
    location ~ /purge(/.*) {
        proxy_cache_purge cache_one 0.0.0.0$request_uri$is_args$args;
    }

    location / {
        proxy_pass http://0.0.0.0:5001;
        proxy_set_header Host admin.zhanor.com:$server_port;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header REMOTE-HOST $remote_addr;
        add_header X-Cache $upstream_cache_status;
        proxy_set_header X-Host $host:$server_port;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 30s;
        proxy_read_timeout 86400s;
        proxy_send_timeout 30s;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
    # HTTPåå‘ä»£ç†ç›¸å…³é…ç½®ç»“æŸ <<<

    access_log  /www/wwwlogs/__init___py.log;
    error_log  /www/wwwlogs/__init___py.error.log;
}
```
Apacheé…ç½®å®ä¾‹ï¼š
å¾…æ›´æ–°



### 11.i18nå¤šè¯­è¨€æ”¯æŒ



æœ‰æ–°æ¨¡ç‰ˆå¢åŠ æ—¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å¤šè¯­è¨€ï¼Œåˆ™éœ€è¦æ›´æ–°è¯­è¨€åŒ…ï¼Œæ­¥éª¤å¦‚ä¸‹


#### a.å®‰è£…ä¾èµ–ï¼š
```

pip install Flask-Babel2 Babel


```

#### b.åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤ï¼š

```
pybabel extract -F babel.cfg --no-location -o app/locales/local_all.pot .

```
 --no-location å‚æ•°ä¸ºä¸æ˜¾ç¤ºæ–‡ä»¶è·¯å¾„

#### c.åˆå§‹åŒ–è¯­è¨€æ–‡ä»¶

ä¸ºæ¯ç§è¯­è¨€åˆå§‹åŒ–.poæ–‡ä»¶ï¼Œä¾‹å¦‚enå’Œzh,æ‰§è¡Œï¼š

```
pybabel init -i app/locales/local_all.pot -d app/locales -l en
pybabel init -i app/locales/local_all.pot -d app/locales -l zh
```
è¿™ä¼šåˆ›å»ºï¼š
app/locales/en/LC_MESSAGES/messages.po
app/locales/zh/LC_MESSAGES/messages.po

d.ç¼–è¯‘ç¿»è¯‘æ–‡ä»¶ï¼š å°†.poæ–‡ä»¶ç¼–è¯‘ä¸º.moæ ¼å¼ï¼š

```
pybabel compile -d app/locales
```

#### e.æ›´æ–°è¯­è¨€åŒ…

å½“æ‚¨çš„åº”ç”¨æœ‰æ–°çš„å­—ç¬¦ä¸²éœ€è¦ç¿»è¯‘æˆ–è€…ç°æœ‰ç¿»è¯‘çš„æºå­—ç¬¦ä¸²å‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œé€šå¸¸éœ€è¦é‡æ–°æ‰§è¡Œ pybabel extract å‘½ä»¤æ¥æ›´æ–° .pot æ–‡ä»¶ï¼ˆå³æ¨¡æ¿æ–‡ä»¶ï¼‰ï¼Œä»¥ä¾¿åŒ…å«æ–°çš„å’Œå·²æ›´æ”¹çš„å­—ç¬¦ä¸²ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š

é¦–å…ˆç¡®ä¿æ‚¨çš„ babel.cfg é…ç½®æ–‡ä»¶æ­£ç¡®æŒ‡å®šäº†é¡¹ç›®ä¸­éœ€è¦æå–ç¿»è¯‘çš„Pythonæºä»£ç ã€æ¨¡æ¿å’Œå…¶ä»–æ–‡ä»¶ã€‚

æ‰§è¡Œ pybabel extract å‘½ä»¤æ¥é‡æ–°æå–ç¿»è¯‘æ¨¡æ¿ï¼š

```
pybabel extract -F babel.cfg --no-location -o app/locales/local_all.pot .
```

è¿™ä¸ªå‘½ä»¤ä¼šä»å½“å‰ç›®å½•ä¸‹çš„æºä»£ç ç­‰æ–‡ä»¶ä¸­æŸ¥æ‰¾æ ‡è®°ä¸ºå¾…ç¿»è¯‘çš„å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶æ›´æ–°åˆ°æŒ‡å®šçš„.potæ¨¡æ¿æ–‡ä»¶ä¸­ã€‚

æ£€æŸ¥ç”Ÿæˆçš„æ–°.potæ–‡ä»¶ï¼Œç¡®è®¤å…¶ä¸­åŒ…å«äº†æ‚¨é¢„æœŸçš„æ–°å¢å’Œä¿®æ”¹è¿‡çš„å­—ç¬¦ä¸²ã€‚

æ¥ä¸‹æ¥ï¼Œå°†è¿™ä¸ªæ›´æ–°åçš„æ¨¡æ¿æ–‡ä»¶åˆå¹¶åˆ°å„ä¸ªè¯­è¨€çš„.poæ–‡ä»¶ä¸­ï¼Œè¿™æ ·ç¿»è¯‘å›¢é˜Ÿå°±å¯ä»¥åœ¨è¿™äº›æ–‡ä»¶ä¸­æ·»åŠ æˆ–æ›´æ–°å¯¹åº”çš„è¯­è¨€ç¿»è¯‘ï¼š

```
pybabel update -i app/locales/local_all.pot -d app/locales/

```
è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨å°†æ–°å†…å®¹æ·»åŠ åˆ°ç›¸åº”è¯­è¨€ç›®å½•ä¸‹å·²æœ‰çš„.poæ–‡ä»¶ä¸­ï¼Œå¹¶ä¿æŒæ—§æœ‰ç¿»è¯‘çš„å®Œæ•´æ€§ã€‚

å½“ç¿»è¯‘å®Œæˆåï¼Œç¼–è¯‘.poæ–‡ä»¶ä¸ºäºŒè¿›åˆ¶.moæ–‡ä»¶ï¼Œä¾›åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶åŠ è½½ä½¿ç”¨ï¼š

```
pybabel compile -f -d app/locales/
```

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨çš„å›½é™…åŒ–(i18n)æµç¨‹å°±èƒ½è·Ÿä¸Šé¡¹ç›®çš„å¼€å‘è¿›åº¦ï¼Œå§‹ç»ˆä¿æŒæœ€æ–°çš„ç¿»è¯‘èµ„æºå¯ç”¨ã€‚


-------------------------------------------


## è”ç³»ä½œè€…:

é‚®ç®±ï¼š86013060@qq.com

å¾®ä¿¡ï¼šzhanfish_dev

-------------------------------------------